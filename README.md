Кэш был реализован при с помощью горизонтального фрагментирования. В каждом клиенте кэш содержит только конкретный фрагмент данных из БД. Величина фрагмента вычисляется формулой:
количества всех записей / количество клиентов с кэшем.

Данный подход позволяет решить проблему с долгой выгрузкой большого количества данных каждым клиентом из БД и уменьшить количество сетевого трафика.

Взаимодействие клиента и управляющего приложения происходит через табличку ClientCommand. Каждая запись в табличке является командой конкретному клиенту, которую необходимо выполнить. Колонка ClientName определяет получателя команды. Колонка Command – команду, которую необходимо выполнить.

Клиент по имени находит первую необработанную запись в табличке (Completed = 0) и выполняет необходимую команду. После выполнения, данной команде выставляется Completed = 1. Затем, через определенный промежуток времени, клиент снова попытается найти запись с Completed = 0. Таким образом реализована возможность отправки команд от управляющего приложения к клиентам

При обновлении кэша, каждый клиент вычисляет размер фрагмента, который ему необходимо выгрузить и делает запрос в БД за этими данными.
